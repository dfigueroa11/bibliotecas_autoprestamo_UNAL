Version 4
SHEET 1 2804 680
WIRE 976 -208 976 -256
WIRE 256 -192 256 -240
WIRE 464 -48 368 -48
WIRE 560 -48 464 -48
WIRE 704 -48 560 -48
WIRE 784 -48 704 -48
WIRE 368 -16 368 -48
WIRE 784 0 784 -48
WIRE -16 32 -64 32
WIRE 128 32 64 32
WIRE 240 32 192 32
WIRE 464 32 464 -48
WIRE 704 32 704 -48
WIRE 960 32 912 32
WIRE 1088 32 1024 32
WIRE 1216 32 1168 32
WIRE -64 64 -64 32
WIRE -64 64 -432 64
WIRE 240 64 240 32
WIRE 320 64 240 64
WIRE 1216 64 1216 32
WIRE 1584 64 1216 64
WIRE 912 80 912 32
WIRE 912 80 832 80
WIRE -64 112 -64 64
WIRE 64 112 -64 112
WIRE 240 112 240 64
WIRE 240 112 144 112
WIRE 912 112 912 80
WIRE 1008 112 912 112
WIRE 1216 112 1216 64
WIRE 1216 112 1088 112
WIRE -672 128 -768 128
WIRE -592 128 -672 128
WIRE -384 128 -592 128
WIRE 1744 128 1536 128
WIRE 1824 128 1744 128
WIRE -768 144 -768 128
WIRE -672 160 -672 128
WIRE -592 160 -592 128
WIRE -384 160 -496 160
WIRE -160 160 -256 160
WIRE 1408 160 1312 160
WIRE 1648 160 1536 160
WIRE 1744 160 1744 128
WIRE 1824 160 1824 128
WIRE -160 176 -160 160
WIRE 368 176 368 80
WIRE 464 176 464 96
WIRE 464 176 368 176
WIRE 544 176 464 176
WIRE 704 176 704 96
WIRE 704 176 624 176
WIRE 784 176 784 96
WIRE 784 176 704 176
WIRE 1312 176 1312 160
WIRE -432 192 -432 64
WIRE -384 192 -432 192
WIRE -208 192 -256 192
WIRE 1408 192 1360 192
WIRE 1584 192 1584 64
WIRE 1584 192 1536 192
WIRE -432 224 -496 224
WIRE -384 224 -432 224
WIRE -240 224 -256 224
WIRE 368 224 368 176
WIRE 784 224 784 176
WIRE 1408 224 1392 224
WIRE 1600 224 1536 224
WIRE 1648 224 1600 224
WIRE -768 256 -768 224
WIRE -16 256 -64 256
WIRE 128 256 64 256
WIRE 240 256 192 256
WIRE 464 256 464 176
WIRE 704 256 704 176
WIRE 960 256 912 256
WIRE 1088 256 1024 256
WIRE 1216 256 1168 256
WIRE -240 288 -240 224
WIRE -64 288 -64 256
WIRE -64 288 -240 288
WIRE 1216 288 1216 256
WIRE 1392 288 1392 224
WIRE 1392 288 1216 288
WIRE -672 304 -672 224
WIRE -592 304 -592 224
WIRE -592 304 -672 304
WIRE -416 304 -592 304
WIRE -208 304 -208 192
WIRE -208 304 -416 304
WIRE -160 304 -160 256
WIRE -160 304 -208 304
WIRE 240 304 240 256
WIRE 320 304 240 304
WIRE 912 304 912 256
WIRE 912 304 832 304
WIRE 1312 304 1312 256
WIRE 1360 304 1360 192
WIRE 1360 304 1312 304
WIRE 1616 304 1360 304
WIRE 1744 304 1744 224
WIRE 1744 304 1616 304
WIRE 1824 304 1824 224
WIRE 1824 304 1744 304
WIRE -64 336 -64 288
WIRE 64 336 -64 336
WIRE 240 336 240 304
WIRE 240 336 144 336
WIRE 912 336 912 304
WIRE 1008 336 912 336
WIRE 1216 336 1216 288
WIRE 1216 336 1088 336
WIRE 368 400 368 320
WIRE 464 400 464 320
WIRE 464 400 368 400
WIRE 576 400 464 400
WIRE 704 400 704 320
WIRE 704 400 576 400
WIRE 784 400 784 320
WIRE 784 400 704 400
FLAG -768 256 0
FLAG -768 128 Vin
FLAG 1824 128 Vin
FLAG 560 -48 Vin
FLAG -432 224 hs1
FLAG 368 176 hs1
FLAG 1600 224 hs2
FLAG 784 176 hs2
FLAG 576 400 0
FLAG 256 -192 0
FLAG 256 -320 PWM
FLAG -256 128 PWM
FLAG 976 -208 0
FLAG 976 -336 PWM2
FLAG 1408 128 PWM2
FLAG -416 304 0
FLAG 1616 304 0
SYMBOL voltage -768 128 R0
WINDOW 3 -49 98 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value 12V
SYMATTR InstName Vin
SYMBOL cap -688 160 R0
WINDOW 0 -15 13 Left 2
WINDOW 3 -28 47 Left 2
SYMATTR InstName C1
SYMATTR Value 1µF
SYMBOL cap -608 160 R0
WINDOW 0 -14 14 Left 2
WINDOW 3 -56 49 Left 2
SYMATTR InstName C2
SYMATTR Value 100nF
SYMBOL cap -512 160 R0
WINDOW 0 -15 13 Left 2
WINDOW 3 -43 49 Left 2
SYMATTR InstName C3
SYMATTR Value 100nF
SYMBOL res -176 160 R0
SYMATTR InstName R1
SYMATTR Value 75k
SYMBOL res 80 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 2.74
SYMBOL res 160 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 2.74
SYMBOL diode 192 16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D1
SYMBOL res 80 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 2.74
SYMBOL res 160 320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 2.74
SYMBOL diode 192 240 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D2
SYMBOL cap 1840 160 M0
WINDOW 0 -17 13 Left 2
WINDOW 3 -29 48 Left 2
SYMATTR InstName C4
SYMATTR Value 1µF
SYMBOL cap 1760 160 M0
WINDOW 0 -17 12 Left 2
WINDOW 3 -60 50 Left 2
SYMATTR InstName C5
SYMATTR Value 100nF
SYMBOL cap 1664 160 M0
WINDOW 0 -15 15 Left 2
WINDOW 3 -42 51 Left 2
SYMATTR InstName C6
SYMATTR Value 100nF
SYMBOL res 1328 160 M0
SYMATTR InstName R6
SYMATTR Value 75k
SYMBOL res 1072 16 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 2.74
SYMBOL res 992 96 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 2.74
SYMBOL diode 960 16 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D3
SYMBOL res 1072 240 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 2.74
SYMBOL res 992 320 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 2.74
SYMBOL diode 960 240 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D4
SYMBOL ind 528 192 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 12.4646mH
SYMATTR SpiceLine Rser=1.58
SYMBOL diode 480 96 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D5
SYMBOL diode 480 320 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D6
SYMBOL diode 720 96 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D7
SYMBOL diode 720 320 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D8
SYMBOL voltage 256 -336 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 3.3 0 0.0001m 0.0001m 0.01 0.02)
SYMBOL voltage 976 -352 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 3.3 0.01 0.0001m 0.0001m 0.01 0.02)
SYMBOL AutoGenerated/lm5104 -320 176 R0
SYMATTR InstName U7
SYMBOL AutoGenerated/lm5104 1472 176 M0
SYMATTR InstName U8
SYMBOL nmos 320 -16 R0
SYMATTR InstName M1
SYMATTR Value irf630
SYMATTR Prefix X
SYMBOL nmos 320 224 R0
SYMATTR InstName M2
SYMATTR Value irf630
SYMATTR Prefix X
SYMBOL nmos 832 224 M0
SYMATTR InstName M3
SYMATTR Value irf630
SYMATTR Prefix X
SYMBOL nmos 832 0 M0
SYMATTR InstName M4
SYMATTR Value irf630
SYMATTR Prefix X
TEXT -816 424 Left 2 !.tran 1u 500m 0m 1u
TEXT 2056 -160 Left 2 !.SUBCKT irf630 1 2 3\nM1 9 7 8 8 MM L=100u W=100u\n.MODEL MM NMOS LEVEL=1 IS=1e-32\n+VTO=3.90614 LAMBDA=0 KP=2.70091\n+CGSO=7.25845e-06 CGDO=1e-11\nRS 8 3 0.0001\nD1 3 1 MD\n.MODEL MD D IS=2.59955e-15 RS=0.0232241 N=0.818263 BV=200\n+IBV=0.00025 EG=1 XTI=2.54918 TT=0\n+CJO=6.35847e-10 VJ=5 M=0.772431 FC=0.5\nRDS 3 1 8e+06\nRD 9 1 0.169992\nRG 2 7 4.09017\nD2 4 5 MD1\n.MODEL MD1 D IS=1e-32 N=50\n+CJO=1.28188e-09 VJ=1.20026 M=0.9 FC=1e-08\nD3 0 5 MD2\n.MODEL MD2 D IS=1e-10 N=0.413904 RS=3e-06\nRL 5 10 1\nFI2 7 9 VFI2 -1\nVFI2 4 0 0\nEV16 10 0 9 7 1\nCAP 11 10 1.2819e-09\nFI1 7 9 VFI1 -1\nVFI1 11 6 0\nRCAP 6 10 1\nD4 0 6 MD3\n.MODEL MD3 D IS=1e-10 N=0.413904\n.ENDS
TEXT -816 448 Left 2 !.ic I(L1)=0
