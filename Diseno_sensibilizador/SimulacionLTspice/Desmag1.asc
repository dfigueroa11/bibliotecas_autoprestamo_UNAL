Version 4
SHEET 1 2852 680
WIRE 464 -48 368 -48
WIRE 560 -48 464 -48
WIRE 704 -48 560 -48
WIRE 784 -48 704 -48
WIRE 368 -16 368 -48
WIRE 784 0 784 -48
WIRE -64 32 -112 32
WIRE 80 32 16 32
WIRE 192 32 144 32
WIRE 464 32 464 -48
WIRE 704 32 704 -48
WIRE 1008 32 960 32
WIRE 1136 32 1072 32
WIRE 1264 32 1216 32
WIRE -112 64 -112 32
WIRE -112 64 -304 64
WIRE 192 64 192 32
WIRE 320 64 192 64
WIRE 1264 64 1264 32
WIRE 1456 64 1264 64
WIRE -624 80 -624 32
WIRE 960 80 960 32
WIRE 960 80 832 80
WIRE 1792 96 1792 48
WIRE -112 112 -112 64
WIRE 16 112 -112 112
WIRE 192 112 192 64
WIRE 192 112 96 112
WIRE 960 112 960 80
WIRE 1056 112 960 112
WIRE 1264 112 1264 64
WIRE 1264 112 1136 112
WIRE -544 128 -640 128
WIRE -464 128 -544 128
WIRE -256 128 -464 128
WIRE 1616 128 1408 128
WIRE 1696 128 1616 128
WIRE -640 144 -640 128
WIRE -544 160 -544 128
WIRE -464 160 -464 128
WIRE -256 160 -368 160
WIRE -32 160 -128 160
WIRE 1280 160 1184 160
WIRE 1520 160 1408 160
WIRE 1616 160 1616 128
WIRE 1696 160 1696 128
WIRE -32 176 -32 160
WIRE 1184 176 1184 160
WIRE -304 192 -304 64
WIRE -256 192 -304 192
WIRE -80 192 -128 192
WIRE 1280 192 1232 192
WIRE 1456 192 1456 64
WIRE 1456 192 1408 192
WIRE 368 208 368 80
WIRE 464 208 464 96
WIRE 464 208 368 208
WIRE 544 208 464 208
WIRE 704 208 704 96
WIRE 704 208 624 208
WIRE 784 208 784 96
WIRE 784 208 704 208
WIRE -304 224 -368 224
WIRE -256 224 -304 224
WIRE -112 224 -128 224
WIRE 1280 224 1264 224
WIRE 1472 224 1408 224
WIRE 1520 224 1472 224
WIRE -640 256 -640 224
WIRE -544 304 -544 224
WIRE -464 304 -464 224
WIRE -464 304 -544 304
WIRE -288 304 -464 304
WIRE -80 304 -80 192
WIRE -80 304 -288 304
WIRE -32 304 -32 256
WIRE -32 304 -80 304
WIRE 1184 304 1184 256
WIRE 1232 304 1232 192
WIRE 1232 304 1184 304
WIRE 1488 304 1232 304
WIRE 1616 304 1616 224
WIRE 1616 304 1488 304
WIRE 1696 304 1696 224
WIRE 1696 304 1616 304
WIRE 368 320 368 208
WIRE 784 320 784 208
WIRE -112 352 -112 224
WIRE -64 352 -112 352
WIRE 80 352 16 352
WIRE 192 352 144 352
WIRE 464 352 464 208
WIRE 704 352 704 208
WIRE 1008 352 960 352
WIRE 1136 352 1072 352
WIRE 1264 352 1264 224
WIRE 1264 352 1216 352
WIRE 192 400 192 352
WIRE 320 400 192 400
WIRE 960 400 960 352
WIRE 960 400 832 400
WIRE -112 432 -112 352
WIRE 16 432 -112 432
WIRE 192 432 192 400
WIRE 192 432 96 432
WIRE 960 432 960 400
WIRE 1056 432 960 432
WIRE 1264 432 1264 352
WIRE 1264 432 1136 432
WIRE 368 496 368 416
WIRE 464 496 464 416
WIRE 464 496 368 496
WIRE 576 496 464 496
WIRE 704 496 704 416
WIRE 704 496 576 496
WIRE 784 496 784 416
WIRE 784 496 704 496
FLAG -640 256 0
FLAG -640 128 Vin
FLAG 1696 128 Vin
FLAG 560 -48 Vin
FLAG -304 224 hs1
FLAG 368 208 hs1
FLAG 1472 224 hs2
FLAG 784 208 hs2
FLAG 576 496 0
FLAG -624 80 0
FLAG -624 -48 PWM
FLAG -128 128 PWM
FLAG 1792 96 0
FLAG 1792 -32 PWM2
FLAG 1280 128 PWM2
FLAG -288 304 0
FLAG 1488 304 0
SYMBOL voltage -640 128 R0
WINDOW 3 -49 98 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value 12V
SYMATTR InstName Vin
SYMBOL cap -560 160 R0
WINDOW 0 -15 13 Left 2
WINDOW 3 -28 47 Left 2
SYMATTR InstName C1
SYMATTR Value 1µF
SYMBOL cap -480 160 R0
WINDOW 0 -14 14 Left 2
WINDOW 3 -56 49 Left 2
SYMATTR InstName C2
SYMATTR Value 100nF
SYMBOL cap -384 160 R0
WINDOW 0 -15 13 Left 2
WINDOW 3 -43 49 Left 2
SYMATTR InstName C3
SYMATTR Value 100nF
SYMBOL res -48 160 R0
SYMATTR InstName R1
SYMATTR Value 75k
SYMBOL res 32 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 2.74
SYMBOL res 112 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 2.74
SYMBOL diode 144 16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D1
SYMBOL res 32 336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 2.74
SYMBOL res 112 416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 2.74
SYMBOL diode 144 336 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D2
SYMBOL cap 1712 160 M0
WINDOW 0 -17 13 Left 2
WINDOW 3 -29 48 Left 2
SYMATTR InstName C4
SYMATTR Value 1µF
SYMBOL cap 1632 160 M0
WINDOW 0 -17 12 Left 2
WINDOW 3 -60 50 Left 2
SYMATTR InstName C5
SYMATTR Value 100nF
SYMBOL cap 1536 160 M0
WINDOW 0 -15 15 Left 2
WINDOW 3 -42 51 Left 2
SYMATTR InstName C6
SYMATTR Value 100nF
SYMBOL res 1200 160 M0
SYMATTR InstName R6
SYMATTR Value 75k
SYMBOL res 1120 16 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 2.74
SYMBOL res 1040 96 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 2.74
SYMBOL diode 1008 16 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D3
SYMBOL res 1120 336 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 2.74
SYMBOL res 1040 416 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 2.74
SYMBOL diode 1008 336 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D4
SYMBOL ind 528 224 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 12.4646mH
SYMATTR SpiceLine Rser=1.58
SYMBOL diode 480 96 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D5
SYMBOL diode 480 416 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D6
SYMBOL diode 720 96 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D7
SYMBOL diode 720 416 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D8
SYMBOL voltage -624 -64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 3.3 0 0.0001m 0.0001m 0.01 0.02)
SYMBOL voltage 1792 -48 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 3.3 0.01 0.0001m 0.0001m 0.01 0.02)
SYMBOL AutoGenerated/lm5104 -192 176 R0
SYMATTR InstName U7
SYMBOL AutoGenerated/lm5104 1344 176 M0
SYMATTR InstName U8
SYMBOL nmos 320 -16 R0
SYMATTR InstName M1
SYMATTR Value irf630
SYMATTR Prefix X
SYMBOL nmos 320 320 R0
SYMATTR InstName M2
SYMATTR Value irf630
SYMATTR Prefix X
SYMBOL nmos 832 320 M0
SYMATTR InstName M3
SYMATTR Value irf630
SYMATTR Prefix X
SYMBOL nmos 832 0 M0
SYMATTR InstName M4
SYMATTR Value irf630
SYMATTR Prefix X
TEXT -648 368 Left 2 !.tran 1u 500m 0m 1u
TEXT 2056 -160 Left 2 !.SUBCKT irf630 1 2 3\nM1 9 7 8 8 MM L=100u W=100u\n.MODEL MM NMOS LEVEL=1 IS=1e-32\n+VTO=3.90614 LAMBDA=0 KP=2.70091\n+CGSO=7.25845e-06 CGDO=1e-11\nRS 8 3 0.0001\nD1 3 1 MD\n.MODEL MD D IS=2.59955e-15 RS=0.0232241 N=0.818263 BV=200\n+IBV=0.00025 EG=1 XTI=2.54918 TT=0\n+CJO=6.35847e-10 VJ=5 M=0.772431 FC=0.5\nRDS 3 1 8e+06\nRD 9 1 0.169992\nRG 2 7 4.09017\nD2 4 5 MD1\n.MODEL MD1 D IS=1e-32 N=50\n+CJO=1.28188e-09 VJ=1.20026 M=0.9 FC=1e-08\nD3 0 5 MD2\n.MODEL MD2 D IS=1e-10 N=0.413904 RS=3e-06\nRL 5 10 1\nFI2 7 9 VFI2 -1\nVFI2 4 0 0\nEV16 10 0 9 7 1\nCAP 11 10 1.2819e-09\nFI1 7 9 VFI1 -1\nVFI1 11 6 0\nRCAP 6 10 1\nD4 0 6 MD3\n.MODEL MD3 D IS=1e-10 N=0.413904\n.ENDS
TEXT -648 392 Left 2 !.ic I(L1)=0
TEXT -720 -184 Left 5 ;Half Bridge Driver 1
TEXT 904 -184 Left 5 ;Half Bridge Driver 2
TEXT 304 -184 Left 5 ;Bridge
RECTANGLE Normal 1856 528 912 -144 1
RECTANGLE Normal 256 528 -720 -144 1
RECTANGLE Normal 864 528 304 -144 3
